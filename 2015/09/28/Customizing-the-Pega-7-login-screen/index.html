

<!DOCTYPE html>
<html lang="zh-CN">
<head>
    
    <meta name="author" content="onisuly">
    
    <meta name="description" content="Pega版本：Pega 7.1.6

前言Pega 7默认的登录界面是有Pega公司Logo的这个，而有些时候我们却需要自己定义Pega的登录界面。

默认的登录页面是显示给那些启动了PRPC但却还没有登录的访客的，系统默认分配PRPC:Unauthenticated这个access group给这">
    
    

    
    <link rel="alternative" href="YOUR_RSS_ADDRESS" title="Onisuly&#39;s Blog" type="application/atom+xml">
    
    
    

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>自定义Pega 7登录界面 | Onisuly&#39;s Blog · 记录点滴</title>

    <!-- Bootstrap -->
    <link rel="stylesheet" href="/bootstrap/css/bootstrap.min.css" type="text/css">
    <link rel="stylesheet" href="/css/style.css" type="text/css">

    <!-- Javascript -->
    <script src="/js/jquery-2.1.0.min.js"></script>
    <script src="/js/jquery.backstretch.min.js"></script>
    <script src="/bootstrap/js/bootstrap.min.js"></script>
    <script src="/js/headroom.min.js"></script>
    <script src="/js/jquery.headroom.min.js"></script> 
    <script src="/js/common.js"></script>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>
<body>
    <nav class="navbar navbar-default navbar-fixed-top navbar-inverse" role="banner">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="https://onisuly.github.io" title="Onisuly's Blog">Onisuly&#39;s Blog</a>
            </div>

            <div role="navigation" class="collapse navbar-collapse bs-navbar-collapse">
                <p class="navbar-text pull-right">记录点滴</p>

                <ul class="nav navbar-nav">
                    
                    <li id="nav-index"><a href="/">首页</a></li>
                    
                    <li id="nav-archives"><a href="/archives">归档</a></li>
                    
                    <li id="nav-tags"><a href="/tags">标签</a></li>
                    
                    <li id="nav-categories"><a href="/categories">分类</a></li>
                    
                    
                    <li><a href="https://github.com/onisuly" target="_blank">GitHub</a></li>
                </ul>
            </div>
        </div>
    </nav>
    
    <script>
    var backRoot = "/images/background/";
    var backArray = [ "1.jpg", "2.jpg", "3.jpg",  ];
        
    $(function() {
        // page-id...
        var pageId = "2015/09/28/Customizing-the-Pega-7-login-screen/";
        pageId = pageId.substr(0, pageId.indexOf("/"));
        if(pageId === "") pageId = "index";
        
        $("#nav-" + pageId).addClass("active");
    });
    </script>

    <article class="post container">
    <div class="well post-body first-post last-post">
        <h1>自定义Pega 7登录界面</h1>
        
        <div class="time-info">
发表于:<time datetime="2015-09-28T03:13:03.000Z" itemprop="datePublished">2015年09月28日</time>，更新于:<time datetime="2015-09-29T03:14:31.000Z" itemprop="dateModified">2015年09月29日</time>，By <a href="https://onisuly.github.io" title="onisuly">onisuly</a>
        </div>
        
        <div class="post-body-inner">
            <div id="toc" class="toc-article well">
                <strong class="toc-title">大纲</strong>
                <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#前言"><span class="toc-number">1.</span> <span class="toc-text">前言</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#实现方法"><span class="toc-number">2.</span> <span class="toc-text">实现方法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#新建一个ruleset"><span class="toc-number">2.1.</span> <span class="toc-text">新建一个ruleset</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#新建一个access_group"><span class="toc-number">2.2.</span> <span class="toc-text">新建一个access group</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#保存rule到新的ruleset中"><span class="toc-number">2.3.</span> <span class="toc-text">保存rule到新的ruleset中</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#更新Requestor_Type"><span class="toc-number">2.4.</span> <span class="toc-text">更新Requestor Type</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#参考资料"><span class="toc-number">3.</span> <span class="toc-text">参考资料</span></a></li></ol>
            </div>
            
            <blockquote>
<p>Pega版本：Pega 7.1.6</p>
</blockquote>
<h2 id="前言">前言</h2><p>Pega 7默认的登录界面是有Pega公司Logo的这个，而有些时候我们却需要自己定义Pega的登录界面。</p>
<p><img src="login-screen.png" alt="login-screen"></p>
<p>默认的登录页面是显示给那些启动了PRPC但却还没有登录的访客的，系统默认分配PRPC:Unauthenticated这个access group给这些访客。</p>
<p>要自定义登录界面，我们需要创建一个access group和一个ruleset来保存登录界面，然后配置系统使用我们创建的ruleset和access group来代替系统默认分配给未登录访客的ruleset和access group。</p>
<h2 id="实现方法">实现方法</h2><h3 id="新建一个ruleset">新建一个ruleset</h3><p>创建一个ruleset和一个ruleset版本来存放自定义登录界面的rules。给这个ruleset起一个容易识别的名字，例如：Unauthenticated:01-01-01。</p>
<p><img src="new-ruleset.png" alt="new-ruleset"></p>
<h3 id="新建一个access_group">新建一个access group</h3><p>给未未验证登录的访客创建一个access group</p>
<p><img src="access-group-definition.png" alt="access-group-definition"></p>
<p><img src="access-group-advanced.png" alt="access-group-advanced"></p>
<ol>
<li>Application设置为PegaRULES，并设置相应的版本号</li>
<li>Roles设置为PegaRULES:Guest，即访客的access role</li>
<li>把Unauthenticated:01-01作为Production Ruleset设置给这个新的ruleset并把它添加到你自己当前的access group上（这样你才能向这个新ruleset中保存rule）</li>
</ol>
<blockquote>
<p><strong>注意</strong>：当你保存这个access group时会出现一个警告说你创建的这个ruleset没有在application中定义，你可以忽略这个警告。</p>
</blockquote>
<h3 id="保存rule到新的ruleset中">保存rule到新的ruleset中</h3><p>保存下列标准rule的副本到Unauthenticated:01-01-01这个ruleset中（不要更改rule的名字）</p>
<table>
<thead>
<tr>
<th style="text-align:left">Rule</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">web-login</td>
<td style="text-align:left">这个HTML rule定义了login页面的图片和其他元素</td>
</tr>
</tbody>
</table>
<p><img src="save-as-web-login.png" alt="save-as-web-login"></p>
<p>新建一个Binary File Rule到Unauthenticated并上传一张图片</p>
<p><img src="new-binary-file.png" alt="new-binary-file"></p>
<p>在Web-Login中找到</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">img</span> <span class="attribute">src</span>=<span class="value">"webwb/desktopimages/pzpega-7-login.gif"</span> <span class="attribute">alt</span>=<span class="value">"Pega 7"</span> /&gt;</span></span><br></pre></td></tr></table></figure>
<p>并替换为</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">img</span> <span class="attribute">src</span>=<span class="value">"webwb/MyCustomLogo.gif"</span> <span class="attribute">width</span>=<span class="value">"300px"</span> <span class="attribute">alt</span>=<span class="value">"My Custom Logo"</span> /&gt;</span></span><br></pre></td></tr></table></figure>
<p>你也可以修改Web-Login中的其他内容来进一步自定义登录界面</p>
<h3 id="更新Requestor_Type">更新Requestor Type</h3><p>Requestor type数据实例定义了可以访问Pega 7的请求者类型，例如：一个浏览器会话，一个外部应用或是一个内部后台进程。当某人试图通过正常方式使用浏览器访问Pega 7的时候就是建立在BROWSER的Requestor Type之上的。</p>
<ol>
<li>在Records Explorer中选择SysAdmin &gt; Requestor Type</li>
<li>打开pega BROWSER<br><img src="browser-requestor-type.png" alt="browser-requestor-type"></li>
<li>添加”Unauthenticated”access group到Access Groups列表中，并选择前面的单选框<br><img src="modify-browser-requestor-type.png" alt="modify-browser-requestor-type"></li>
<li>保存这个Requestor Type</li>
</ol>
<blockquote>
<p><strong>注意</strong>：一定要确保”Unauthenticated”access group前的单选框是选中的状态，如果没有，选中它再保存一次。</p>
</blockquote>
<p>登出后就可以看到效果了</p>
<p><img src="custom-login-screen.png" alt="custom-login-screen"></p>
<hr>
<h2 id="参考资料">参考资料</h2><ul>
<li><a href="https://pdn.pega.com/user-interface/customizing-the-pega-7-login-screen" title="Customizing the Pega 7 login screen" target="_blank" rel="external">PDN: Customizing the Pega 7 login screen</a></li>
</ul>


			
            <section class="comment">
<!-- 多说评论框 start -->
	<div class="ds-thread" data-thread-key="/2015/09/28/Customizing-the-Pega-7-login-screen/" data-title="自定义Pega 7登录界面" data-url="https://onisuly.github.io/2015/09/28/Customizing-the-Pega-7-login-screen/"></div>
<!-- 多说评论框 end -->
<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
<script type="text/javascript">
var duoshuoQuery = {short_name:"YOUR_DUOSHUO_SHORT_NAME"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0]
		 || document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
	</script>
<!-- 多说公共JS代码 end -->
</section>
        </div>
    </div>
</article>

    <footer id="footer">
    <div id="bottom-tip">
        Onisuly&#39;s Blog —— <small>记录点滴</small>
    </div>
        <small>该博客由 <a href="https://hexo.io/" target="_blank">Hexo</a> 强力驱动，搭载 <a href="https://github.com/XadillaX/hexadillax" target="_blank">Hexadillax</a> 主题</small><br />
        <small>&copy; 2015 onisuly</small>
    </footer>

    


</body>
</html>

